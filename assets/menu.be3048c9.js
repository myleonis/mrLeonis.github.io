import{o as e,p as l}from"./index.2cc56d29.js";import a from"./CreateDrawer.e33c1c66.js";import{d as t,e as n,a3 as u,j as s,i as d,f as o,X as r,o as i,c as p,a as c,Y as v,Z as f,x as h,bH as m,cd as b,bj as y,t as _,ce as g,a0 as x,bt as k,$ as j}from"./vendor.70faab48.js";const w={class:"n-layout-page-header"},U=y(" 页面数据为 Mock 示例数据，非真实数据。 "),z=y(" 添加菜单 "),T={class:"flex items-center"},C={class:"flex items-center"},K={class:"w-full menu"},D={class:"py-3 menu-list"},O={key:0,class:"flex items-center justify-center py-4"},$=y(" 从菜单列表选择一项后，进行编辑"),q=y("当前窗口"),P=y("新窗口"),R=y("保存修改"),H=y("重置"),M=t({setup(t){const M={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},S=n(null),X=n(),Y=u();let Z=n([]),A=n([]);const B=n([]),E=n(!0),F=n(!1),G=n(!1),I=n(""),J=n(""),L=n(""),N=s((()=>!Z.value.length)),Q=n([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:N}]),V=d({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function W(e){L.value="home"===e?"添加顶栏菜单":`添加子菜单：${I.value}`,function(){const{openDrawer:e}=X.value;e()}()}function ee(e){if(e.length){const a=l(h(B),e[0]);Z.value=e,I.value=a.label,Object.assign(V,a),G.value=!0}else G.value=!1,Z.value=[],I.value=""}function le(){const e=l(h(B),Z[0]);Object.assign(V,e)}function ae(){S.value.validate((e=>{e?Y.error("请填写完整信息"):Y.error("抱歉，您没有该权限")}))}function te(){A.value.length?A.value=[]:A.value=h(B).map((e=>e.key))}function ne(e){A.value=e}return o((()=>{return l=this,a=null,t=function*(){const l=yield e(),a=l.list.map((e=>e.key));Object.assign(V,a),B.value=l.list,E.value=!1},new Promise(((e,n)=>{var u=e=>{try{d(t.next(e))}catch(l){n(l)}},s=e=>{try{d(t.throw(e))}catch(l){n(l)}},d=l=>l.done?e(l.value):Promise.resolve(l.value).then(u,s);d((t=t.apply(l,a)).next())}));var l,a,t})),(e,l)=>{const t=r("n-card"),n=r("n-icon"),u=r("n-button"),s=r("n-dropdown"),d=r("n-space"),o=r("n-input"),Y=r("n-spin"),Z=r("n-tree"),N=r("n-gi"),ue=r("n-alert"),se=r("n-form-item"),de=r("n-radio"),oe=r("n-radio-group"),re=r("n-form"),ie=r("n-grid");return i(),p("div",null,[c("div",w,[v(t,{bordered:!1,title:"菜单权限管理"},{default:f((()=>[U])),_:1})]),v(ie,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:f((()=>[v(N,{span:"1"},{default:f((()=>[v(t,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:f((()=>[v(d,null,{default:f((()=>[v(s,{trigger:"hover",onSelect:W,options:Q.value},{default:f((()=>[v(u,{type:"info",ghost:"","icon-placement":"right"},{icon:f((()=>[c("div",T,[v(n,{size:"14"},{default:f((()=>[v(h(m))])),_:1})])])),default:f((()=>[z])),_:1})])),_:1},8,["options"]),v(u,{type:"info",ghost:"","icon-placement":"left",onClick:te},{icon:f((()=>[c("div",C,[v(n,{size:"14"},{default:f((()=>[v(h(b))])),_:1})])])),default:f((()=>[y(" 全部"+_(h(A).length?"收起":"展开")+" ",1)])),_:1})])),_:1})])),default:f((()=>[c("div",K,[v(o,{type:"input",value:J.value,"onUpdate:value":l[0]||(l[0]=e=>J.value=e),placeholder:"输入菜单名称搜索"},{suffix:f((()=>[v(n,{size:"18",class:"cursor-pointer"},{default:f((()=>[v(h(g))])),_:1})])),_:1},8,["value"]),c("div",D,[E.value?(i(),p("div",O,[v(Y,{size:"medium"})])):(i(),x(Z,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:J.value,data:B.value,expandedKeys:h(A),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":ee,"onUpdate:expandedKeys":ne},null,8,["pattern","data","expandedKeys"]))])])])),_:1})])),_:1}),v(N,{span:"2"},{default:f((()=>[v(t,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:f((()=>[v(d,null,{default:f((()=>[v(n,{size:"18"},{default:f((()=>[v(h(k))])),_:1}),c("span",null,"编辑菜单"+_(I.value?`：${I.value}`:""),1)])),_:1})])),default:f((()=>[v(ue,{type:"info",closable:""},{default:f((()=>[$])),_:1}),G.value?(i(),x(re,{key:0,model:h(V),rules:M,ref:(e,l)=>{l.formRef=e,S.value=e},"label-placement":"left","label-width":100,class:"py-4"},{default:f((()=>[v(se,{label:"类型",path:"type"},{default:f((()=>[c("span",null,_(1===h(V).type?"侧边栏菜单":""),1)])),_:1}),v(se,{label:"标题",path:"label"},{default:f((()=>[v(o,{placeholder:"请输入标题",value:h(V).label,"onUpdate:value":l[1]||(l[1]=e=>h(V).label=e)},null,8,["value"])])),_:1}),v(se,{label:"副标题",path:"subtitle"},{default:f((()=>[v(o,{placeholder:"请输入副标题",value:h(V).subtitle,"onUpdate:value":l[2]||(l[2]=e=>h(V).subtitle=e)},null,8,["value"])])),_:1}),v(se,{label:"路径",path:"path"},{default:f((()=>[v(o,{placeholder:"请输入路径",value:h(V).path,"onUpdate:value":l[3]||(l[3]=e=>h(V).path=e)},null,8,["value"])])),_:1}),v(se,{label:"打开方式",path:"openType"},{default:f((()=>[v(oe,{value:h(V).openType,"onUpdate:value":l[4]||(l[4]=e=>h(V).openType=e),name:"openType"},{default:f((()=>[v(d,null,{default:f((()=>[v(de,{value:1},{default:f((()=>[q])),_:1}),v(de,{value:2},{default:f((()=>[P])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),v(se,{label:"菜单权限",path:"auth"},{default:f((()=>[v(o,{placeholder:"请输入权限，多个权限用，分割",value:h(V).auth,"onUpdate:value":l[5]||(l[5]=e=>h(V).auth=e)},null,8,["value"])])),_:1}),v(se,{path:"auth",style:{"margin-left":"100px"}},{default:f((()=>[v(d,null,{default:f((()=>[v(u,{type:"primary",loading:F.value,onClick:ae},{default:f((()=>[R])),_:1},8,["loading"]),v(u,{onClick:le},{default:f((()=>[H])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])):j("",!0)])),_:1})])),_:1})])),_:1}),v(a,{ref:(e,l)=>{l.createDrawerRef=e,X.value=e},title:L.value},null,8,["title"])])}}});export default M;
