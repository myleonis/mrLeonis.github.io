var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,r=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&s(e,o,t[o]);if(l)for(var o of l(t))n.call(t,o)&&s(e,o,t[o]);return e},u=(e,l)=>t(e,o(l)),i=(e,t,o)=>new Promise(((l,a)=>{var n=e=>{try{r(o.next(e))}catch(t){a(t)}},s=e=>{try{r(o.throw(e))}catch(t){a(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,s);r((o=o.apply(e,t)).next())}));import{b3 as c,d,bP as p,e as f,j as m,x as b,X as g,o as v,a0 as h,bE as y,Z as M,Y as P,bj as k,t as w,a9 as R,a as O,bz as _,bI as S,bn as j,bs as x,a3 as I,i as B,h as C,c as L}from"./vendor.70faab48.js";import{k as N,m as U,_ as F}from"./index.2cc56d29.js";import{a as T}from"./index.esm.ce6efd7b.js";import{B as D}from"./BasicForm.c217fbef.js";import{u as V}from"./useForm.bb1f4829.js";import"./propTypes.37756db6.js";const X=u(r({},c.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),Y=function(e,t){var o;return e.currentStyle?e.currentStyle[t]:null==(o=document.defaultView)?void 0:o.getComputedStyle(e,null)[t]},E={left:0,top:0,currentX:0,currentY:0,flag:!1};const W={class:"w-full cursor-move",id:"basic-modal-bar"},$=k("取消"),z=d({props:r({},X),emits:["on-close","on-ok","register"],setup(e,{emit:t}){const o=e,l=p(),a=f(null),n=f(!1),s=f(!1),u=m((()=>r(r({},o),b(a)))),c=m((()=>{const{subBtuText:e}=a.value;return e||o.subBtuText}));const d=m((()=>r(r(r({},l),b(u)),b(a))));function x(){n.value=!1,s.value=!1,t("on-close")}function I(){n.value=!1,t("on-close")}function B(){s.value=!0,t("on-ok")}const C={setProps:function(e){return i(this,null,(function*(){a.value=N(b(a)||{},e)}))},openModal:function(){n.value=!0,j((()=>{const e=document.getElementById("basic-modal");!function(e,t,o){const l=document.body.clientWidth,a=document.documentElement.clientHeight,n=t.offsetWidth,s=t.offsetHeight,r=t.offsetLeft,u=t.offsetTop,i=l-r-n,c=a-u-s;"auto"!==Y(t,"left")&&(E.left=Y(t,"left")),"auto"!==Y(t,"top")&&(E.top=Y(t,"top")),e.onmousedown=function(t){E.flag=!0,t||(t=window.event,e.onselectstart=function(){return!1});const o=t;E.currentX=o.clientX,E.currentY=o.clientY},document.onmouseup=function(){E.flag=!1,"auto"!==Y(t,"left")&&(E.left=Y(t,"left")),"auto"!==Y(t,"top")&&(E.top=Y(t,"top"))},document.onmousemove=function(e){const l=e||window.event;if(E.flag){const a=l.clientX,n=l.clientY,s=a-E.currentX,d=n-E.currentY;let p=parseInt(E.left)+s,f=parseInt(E.top)+d;return-p>r?p=-r:p>i&&(p=i),-f>u?f=-u:f>c&&(f=c),t.style.left=p+"px",t.style.top=f+"px","function"==typeof o&&o((parseInt(E.left)||0)+s,(parseInt(E.top)||0)+d),e.preventDefault&&e.preventDefault(),!1}}}(document.getElementById("basic-modal-bar"),e)}))},closeModal:x,setSubLoading:function(e){s.value=e}};return S()&&t("register",C),(e,t)=>{const o=g("n-button"),l=g("n-space"),a=g("n-modal");return v(),h(a,_({id:"basic-modal"},b(d),{show:n.value,"onUpdate:show":t[0]||(t[0]=e=>n.value=e),onClose:I}),y({header:M((()=>[O("div",W,w(b(d).title),1)])),default:M((()=>[R(e.$slots,"default")])),_:2},[e.$slots.action?{name:"action",fn:M((()=>[R(e.$slots,"action")]))}:{name:"action",fn:M((()=>[P(l,null,{default:M((()=>[P(o,{onClick:x},{default:M((()=>[$])),_:1}),P(o,{type:"primary",loading:s.value,onClick:B},{default:M((()=>[k(w(b(c)),1)])),_:1},8,["loading"])])),_:1})]))}]),1040,["show"])}}});function G(e){const t=f(null),o=S(),l=()=>{const e=b(t.value);return e};return[l=>{T((()=>{t.value=null})),t.value=l,null==o||o.emit("register",l),x((()=>e),(()=>{e&&l.setProps(U(e))}),{immediate:!0,deep:!0})},{setProps:e=>{var t;null==(t=l())||t.setProps(e)},openModal:()=>{var e;null==(e=l())||e.openModal()},closeModal:()=>{var e;null==(e=l())||e.closeModal()},setSubLoading:e=>{var t;null==(t=l())||t.setSubLoading(e)}}]}const H=[{field:"name",component:"NInput",label:"姓名",labelMessage:"这是一个提示",giProps:{span:1},componentProps:{placeholder:"请输入姓名",onInput:e=>{}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:e=>{}}},{field:"type",component:"NSelect",label:"类型",giProps:{},componentProps:{placeholder:"请选择类型",options:[{label:"舒适性",value:1},{label:"经济性",value:2}],onUpdateValue:e=>{}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",giProps:{},defaultValue:118313526e4,componentProps:{type:"date",clearable:!0,onUpdateValue:e=>{}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",giProps:{},componentProps:{clearable:!0,onUpdateValue:e=>{}}},{field:"makeProject",component:"NCheckbox",label:"预约项目",giProps:{},componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:e=>{}}},{field:"makeSource",component:"NRadioGroup",label:"来源",giProps:{},componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:e=>{}}},{field:"status",label:"状态",giProps:{},slot:"statusSlot"}],q=d({components:{basicModal:z,BasicForm:D},setup(){const e=f(null),t=I(),[o,{openModal:l,closeModal:a,setSubLoading:n}]=G({title:"新增预约"}),[s,{openModal:c,closeModal:d,setSubLoading:p}]=G({title:"确认对话框",showIcon:!0,type:"warning",closable:!1,maskClosable:!0}),[m,{submit:b}]=V({gridProps:{cols:1},collapsedRows:3,labelWidth:120,layout:"horizontal",submitButtonText:"提交预约",showActionButtonGroup:!1,schemas:H}),g=B({formValue:{name:"小马哥"}});return u(r({},C(g)),{modalRef:e,register:m,modalRegister:o,lightModalRegister:s,handleReset:function(e){},showModal:function(){l()},okModal:function(){return i(this,null,(function*(){(yield b())?(a(),t.success("提交成功")):(t.error("验证失败，请填写完整信息"),n(!1))}))},lightOkModal:function(){d(),p()},showLightModal:function(){c()}})}}),A={class:"n-layout-page-header"},Z=k(" 模态框，用于向用户收集或展示信息，Modal 采用 Dialog 预设，扩展拖拽效果 "),J=O("br",null,null,-1),K=k(" 以下是 useModal 方式，ref方式，也支持，使用方式和其他组件一致，如：modalRef.value.closeModal() "),Q=k(" 使用 useModal 进行弹窗展示和操作，并演示了在Modal内和Form组件，组合使用方法 "),ee=k("打开Modal嵌套Form例子"),te=k(" 使用 useModal 进行弹窗展示和操作，自定义配置，实现轻量级效果，更多配置，请参考文档 "),oe=k("轻量级确认"),le=k(" 组件暴露了，setProps 方法，用于修改组件内部 Props，比如标题，等，具体参考UI框架文档，DialogReactive Properties "),ae=O("p",{class:"text-gray-500",style:{"padding-left":"35px"}},"一些对话框内容",-1);var ne=F(q,[["render",function(e,t,o,l,a,n){const s=g("n-card"),r=g("n-alert"),u=g("n-divider"),i=g("n-button"),c=g("n-space"),d=g("n-input"),p=g("BasicForm"),f=g("basicModal");return v(),L("div",null,[O("div",A,[P(s,{bordered:!1,title:"模态框"},{default:M((()=>[Z,J,K])),_:1})]),P(s,{bordered:!1,class:"proCard mt-4"},{default:M((()=>[P(r,{title:"Modal嵌套Form",type:"info"},{default:M((()=>[Q])),_:1}),P(u),P(c,null,{default:M((()=>[P(i,{type:"primary",onClick:e.showModal},{default:M((()=>[ee])),_:1},8,["onClick"])])),_:1}),P(u),P(r,{title:"个性化轻量级",type:"info"},{default:M((()=>[te])),_:1}),P(u),P(c,null,{default:M((()=>[P(i,{type:"primary",onClick:e.showLightModal},{default:M((()=>[oe])),_:1},8,["onClick"])])),_:1}),P(u),P(r,{title:"提示",type:"info"},{default:M((()=>[le])),_:1})])),_:1}),P(f,{onRegister:e.modalRegister,ref:"modalRef",class:"basicModal",onOnOk:e.okModal},{default:M((()=>[P(p,{onRegister:e.register,onReset:e.handleReset,class:"basicForm"},{statusSlot:M((({model:e,field:t})=>[P(d,{value:e[t],"onUpdate:value":o=>e[t]=o},null,8,["value","onUpdate:value"])])),_:1},8,["onRegister","onReset"])])),_:1},8,["onRegister","onOnOk"]),P(f,{onRegister:e.lightModalRegister,class:"basicModalLight",ref:"modalRef",onOnOk:e.lightOkModal},{default:M((()=>[ae])),_:1},8,["onRegister","onOnOk"])])}]]);export default ne;
