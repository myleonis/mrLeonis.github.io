import{d as a,e,a3 as s,i as l,R as t,V as o,X as i,o as r,c,a as d,Y as n,Z as u,x as v,bf as f,bg as p,bh as m,bi as h,p as g,b as w,bj as x}from"./vendor.70faab48.js";import{_,u as b,R as y}from"./index.2cc56d29.js";import{l as j}from"./logo.22a79b71.js";const C=a=>(g("data-v-212521d1"),a=a(),w(),a),k={class:"view-account"},z=C((()=>d("div",{class:"view-account-header"},null,-1))),U={class:"view-account-container"},q=C((()=>d("div",{class:"view-account-top"},[d("div",{class:"view-account-top-logo"},[d("img",{src:"./assets/account-logo.0a6f895e.png",alt:""})]),d("div",{class:"view-account-top-desc"},"Naive Ui Admin中台前端/设计解决方案")],-1))),R={class:"view-account-form"},S={class:"w-full"},I={class:"flex justify-between"},P={class:"flex-initial"},A=x("自动登录"),D=C((()=>d("div",{class:"flex-initial order-last"},[d("a",{href:"javascript:"},"忘记密码")],-1))),E=x(" 登录 "),N={class:"flex view-account-other"},V=C((()=>d("div",{class:"flex-initial"},[d("span",null,"其它登录方式")],-1))),X={class:"flex-initial mx-2"},Y={href:"javascript:"},Z={class:"flex-initial mx-2"},B={href:"javascript:"},F=C((()=>d("div",{class:"flex-initial",style:{"margin-left":"auto"}},[d("a",{href:"javascript:"},"注册账号")],-1)));var G=_(a({setup(a){const g=e(),w=s(),x=e(!1),_=e(!0),C=l({username:"admin",password:"123456",isCaptcha:!1}),G={username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},isCaptcha:{required:!0,type:"boolean",trigger:"change",message:"请点击按钮进行验证码校验",validator:(a,e)=>!0===e}},H=b(),J=t(),K=o(),L=a=>{a.preventDefault(),g.value.validate((e=>{return s=this,l=null,t=function*(){var a;if(e)w.error("请填写完整信息，并且进行验证码校验");else{const{username:e,password:s}=C;w.loading("登录中..."),x.value=!0;const l={username:e,password:s},{code:t,message:o}=yield H.login(l);if(t==y.SUCCESS){const e=decodeURIComponent((null==(a=K.query)?void 0:a.redirect)||"/");w.success("登录成功！"),J.replace(e).then((a=>{"login"==K.name&&J.replace("/")}))}else w.info(o||"登录失败")}},new Promise(((e,o)=>{var i=e=>{try{c(t.next(e))}catch(a){o(a)}},r=e=>{try{c(t.throw(e))}catch(a){o(a)}},c=a=>a.done?e(a.value):Promise.resolve(a.value).then(i,r);c((t=t.apply(s,l)).next())}));var s,l,t}))},M=()=>{C.isCaptcha=!0};return(a,e)=>{const s=i("n-icon"),l=i("n-input"),t=i("n-form-item"),o=i("mi-captcha"),w=i("n-checkbox"),b=i("n-button"),y=i("n-form");return r(),c("div",k,[z,d("div",U,[q,d("div",R,[n(y,{ref:(a,e)=>{e.formRef=a,g.value=a},"label-placement":"left",size:"large",model:v(C),rules:G},{default:u((()=>[n(t,{path:"username"},{default:u((()=>[n(l,{value:v(C).username,"onUpdate:value":e[0]||(e[0]=a=>v(C).username=a),placeholder:"请输入用户名"},{prefix:u((()=>[n(s,{size:"18",color:"#808695"},{default:u((()=>[n(v(f))])),_:1})])),_:1},8,["value"])])),_:1}),n(t,{path:"password"},{default:u((()=>[n(l,{value:v(C).password,"onUpdate:value":e[1]||(e[1]=a=>v(C).password=a),type:"password","show-password-toggle":"",placeholder:"请输入密码"},{prefix:u((()=>[n(s,{size:"18",color:"#808695"},{default:u((()=>[n(v(p))])),_:1})])),_:1},8,["value"])])),_:1}),n(t,{path:"isCaptcha"},{default:u((()=>[d("div",S,[n(o,{width:"384","theme-color":"#2d8cf0",logo:v(j),onSuccess:M},null,8,["logo"])])])),_:1}),n(t,{class:"default-color"},{default:u((()=>[d("div",I,[d("div",P,[n(w,{checked:_.value,"onUpdate:checked":e[2]||(e[2]=a=>_.value=a)},{default:u((()=>[A])),_:1},8,["checked"])]),D])])),_:1}),n(t,null,{default:u((()=>[n(b,{type:"primary",onClick:L,size:"large",loading:x.value,block:""},{default:u((()=>[E])),_:1},8,["loading"])])),_:1}),n(t,{class:"default-color"},{default:u((()=>[d("div",N,[V,d("div",X,[d("a",Y,[n(s,{size:"24",color:"#2d8cf0"},{default:u((()=>[n(v(m))])),_:1})])]),d("div",Z,[d("a",B,[n(s,{size:"24",color:"#2d8cf0"},{default:u((()=>[n(v(h))])),_:1})])]),F])])),_:1})])),_:1},8,["model"])])])])}}}),[["__scopeId","data-v-212521d1"]]);export default G;
