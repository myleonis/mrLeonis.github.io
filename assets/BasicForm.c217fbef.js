var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,l,o)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o,i=(e,t)=>{for(var l in t||(t={}))n.call(t,l)&&s(e,l,t[l]);if(o)for(var l of o(t))a.call(t,l)&&s(e,l,t[l]);return e},u=(e,t,l)=>new Promise(((o,n)=>{var a=e=>{try{i(l.next(e))}catch(t){n(t)}},s=e=>{try{i(l.throw(e))}catch(t){n(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,s);i((l=l.apply(e,t)).next())}));import{e as r,h as d,d as f,j as c,c as p,_ as m,k as b}from"./index.2cc56d29.js";import{x as g,B as v,bx as y,d as h,bH as O,bJ as P,bD as k,e as B,i as S,j as F,bs as j,f as M,X as x,o as _,a0 as w,Z as V,Y as C,c as N,r as R,bz as E,bE as z,bj as I,t as U,bK as D,a9 as T,F as G,bL as A,$,bF as Q,bG as W}from"./vendor.70faab48.js";import{p as H}from"./propTypes.37756db6.js";function J(e){return"NInput"===e?"请输入":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":""}const K={labelWidth:{type:[Number,String],default:80},schemas:{type:[Array],default:()=>[]},layout:{type:String,default:"inline"},inline:{type:Boolean,default:!1},size:{type:String,default:"medium"},labelPlacement:{type:String,default:"left"},isFull:{type:Boolean,default:!0},showActionButtonGroup:H.bool.def(!0),showResetButton:H.bool.def(!0),resetButtonOptions:Object,showSubmitButton:H.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:H.bool.def(!0),submitButtonText:{type:String,default:"查询"},resetButtonText:{type:String,default:"重置"},gridProps:Object,giProps:Object,baseGridStyle:{type:Object},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}};var L=m(h({name:"BasicUpload",components:{DownOutlined:O,UpOutlined:P,QuestionCircleOutlined:k},props:i({},K),emits:["reset","submit","register"],setup(e,{emit:o,attrs:n}){const a=B({}),s=S({}),m=B({}),h=B(null),O=B(null),P=B(!0),k=B(!1),x=B(!1),_=F((()=>Object.assign({size:e.size,type:"primary"},e.submitButtonOptions))),w=F((()=>Object.assign({size:e.size,type:"default"},e.resetButtonOptions)));const V=F((()=>{const t=i(i({},e),g(m)),l={rules:{}};return(t.schemas||[]).forEach((e=>{e.rules&&f(e.rules)&&(l.rules[e.field]=e.rules)})),i(i({},t),g(l))})),C=F((()=>{const{layout:e}=g(V);return"inline"===e})),N=F((()=>{const{gridProps:e}=g(V);return o=i({},e),n={collapsed:!!C.value&&P.value,responsive:"screen"},t(o,l(n));var o,n})),R=F((()=>i(i(i({},n),e),g(V)))),E=F((()=>{const e=g(h)||g(V).schemas;for(const t of e){const{defaultValue:e}=t;e&&(t.defaultValue=e)}return e})),{handleFormValues:z,initDefault:I}=function({defaultFormModel:e,getSchema:t,formModel:l}){return{handleFormValues:function(e){if(!d(e))return{};const t={};for(const l of Object.entries(e)){let[,e]=l;const[o]=l;!o||f(e)&&0===e.length||r(e)||c(e)||(p(e)&&(e=e.trim()),y(t,o,e))}return t},initDefault:function(){const o=g(t),n={};o.forEach((e=>{const{defaultValue:t}=e;c(t)||(n[e.field]=t,l[e.field]=t)})),e.value=n}}}({getProps:V,defaultFormModel:a,getSchema:E,formModel:s}),{handleSubmit:U,validate:D,resetFields:T,getFieldsValue:G,clearValidate:A,setFieldsValue:$}=function({emit:e,getProps:t,formModel:l,getSchema:o,formElRef:n,defaultFormModel:a,loadingSub:s,handleFormValues:i}){function d(){return u(this,null,(function*(){var e;return null==(e=g(n))?void 0:e.validate()}))}function f(o){return u(this,null,(function*(){o&&o.preventDefault(),s.value=!0;const{submitFunc:a}=g(t);if(a&&r(a))yield a();else if(g(n))try{return yield d(),s.value=!1,e("submit",l),!0}catch(i){return s.value=!1,!1}}))}function c(){return u(this,null,(function*(){var e;yield null==(e=g(n))?void 0:e.restoreValidation()}))}return{handleSubmit:f,validate:d,resetFields:function(){return u(this,null,(function*(){const{resetFunc:o,submitOnReset:s}=g(t);if(o&&r(o)&&(yield o()),!g(n))return;Object.keys(l).forEach((e=>{l[e]=g(a)[e]||null})),yield c();const u=i(v(g(l)));e("reset",u),s&&(yield f())}))},getFieldsValue:function(){return g(n)?i(v(g(l))):{}},clearValidate:c,setFieldsValue:function(e){return u(this,null,(function*(){const t=g(o).map((e=>e.field)).filter(Boolean);Object.keys(e).forEach((o=>{const n=e[o];t.includes(o)&&(l[o]=n)}))}))}}}({emit:o,getProps:V,formModel:s,getSchema:E,formElRef:O,defaultFormModel:a,loadingSub:k,handleFormValues:z});const Q={getFieldsValue:G,setFieldsValue:$,resetFields:T,validate:D,clearValidate:A,setProps:function(e){return u(this,null,(function*(){m.value=b(g(m)||{},e)}))},submit:U};return j((()=>E.value),(e=>{g(x)||(null==e?void 0:e.length)&&(I(),x.value=!0)})),M((()=>{I(),o("register",Q)})),{formElRef:O,formModel:s,getGrid:N,getProps:V,getBindValue:R,getSchema:E,getSubmitBtnOptions:_,getResetBtnOptions:w,handleSubmit:U,resetFields:T,loadingSub:k,isInline:C,getComponentProps:function(e){var t;const l=null!=(t=e.componentProps)?t:{},o=e.component;return i({clearable:!0,placeholder:J(g(o))},l)},unfoldToggle:function(){P.value=!P.value}}}}),[["render",function(e,t,l,o,n,a){const s=x("QuestionCircleOutlined"),i=x("n-icon"),u=x("n-tooltip"),r=x("n-checkbox"),d=x("n-space"),f=x("n-checkbox-group"),c=x("n-radio"),p=x("n-radio-group"),m=x("n-form-item"),b=x("n-gi"),g=x("n-button"),v=x("DownOutlined"),y=x("UpOutlined"),h=x("n-grid"),O=x("n-form");return _(),w(O,E(e.getBindValue,{model:e.formModel,ref:"formElRef"}),{default:V((()=>[C(h,Q(W(e.getGrid)),{default:V((()=>[(_(!0),N(G,null,R(e.getSchema,(t=>(_(),w(b,E(t.giProps,{key:t.field}),{default:V((()=>[C(m,{label:t.label,path:t.field},z({default:V((()=>[t.slot?T(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):"NCheckbox"===t.component?(_(),w(f,{key:1,value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l},{default:V((()=>[C(d,null,{default:V((()=>[(_(!0),N(G,null,R(t.componentProps.options,(e=>(_(),w(r,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1024)])),_:2},1032,["value","onUpdate:value"])):"NRadioGroup"===t.component?(_(),w(p,{key:2,value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l},{default:V((()=>[C(d,null,{default:V((()=>[(_(!0),N(G,null,R(t.componentProps.options,(e=>(_(),w(c,{key:e.value,value:e.value},{default:V((()=>[I(U(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1024)])),_:2},1032,["value","onUpdate:value"])):(_(),w(A(t.component),E({key:3},e.getComponentProps(t),{value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l,class:{isFull:0!=t.isFull&&e.getProps.isFull}}),null,16,["value","onUpdate:value","class"])),t.suffix?T(e.$slots,t.suffix,{key:4,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):$("",!0)])),_:2},[t.labelMessage?{name:"label",fn:V((()=>[I(U(t.label)+" ",1),C(u,{trigger:"hover",style:D(t.labelMessageStyle)},{trigger:V((()=>[C(i,{size:"18",class:"cursor-pointer text-gray-400"},{default:V((()=>[C(s)])),_:1})])),default:V((()=>[I(" "+U(t.labelMessage),1)])),_:2},1032,["style"])]))}:void 0]),1032,["label","path"])])),_:2},1040)))),128)),e.getProps.showActionButtonGroup?(_(),w(b,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:V((({overflow:t})=>[C(d,{align:"center",justify:e.isInline?"end":"start",style:D({"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`})},{default:V((()=>[e.getProps.showSubmitButton?(_(),w(g,E({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit,loading:e.loadingSub}),{default:V((()=>[I(U(e.getProps.submitButtonText),1)])),_:1},16,["onClick","loading"])):$("",!0),e.getProps.showResetButton?(_(),w(g,E({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:V((()=>[I(U(e.getProps.resetButtonText),1)])),_:1},16,["onClick"])):$("",!0),e.isInline&&e.getProps.showAdvancedButton?(_(),w(g,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:V((()=>[t?(_(),w(i,{key:0,size:"14",class:"unfold-icon"},{default:V((()=>[C(v)])),_:1})):(_(),w(i,{key:1,size:"14",class:"unfold-icon"},{default:V((()=>[C(y)])),_:1}))])),default:V((()=>[I(" "+U(t?"展开":"收起"),1)])),_:2},1032,["onClick"])):$("",!0)])),_:2},1032,["justify","style"])])),_:1},8,["span","suffix"])):$("",!0)])),_:3},16)])),_:3},16,["model"])}],["__scopeId","data-v-676ce85c"]]);export{L as B};
